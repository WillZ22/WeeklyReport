<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="#">

    <title>WeeklyReport</title>

    <!-- Bootstrap core CSS -->
    <link href="../Static/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">

		<!--Font Awesome CSS-->
		<!-- <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet"> -->

    <!-- Custom styles for this project -->
    <link href="../Static/css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style media="screen">
      #content{
        margin-top: 100px;
      }

      #record{
        height: 120px;
      }

      #notify{
        height: 120px;
      }

    </style>


  </head>


  <body>
    <nav class="mainnav navbar navbar-default navbar-static-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Weekly Report</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li id="WriteReport"><a href="#">写周报</a></li>
              <li id="signed"><a href="#contact">查看考勤</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li>
                <a href="#"><i class="fa fa-info"></i></a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                  <span class="profile"></span>
                  用户
                  <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#">个人信息</a></li>
                  <li><a href="#">修改密码</a></li>
                  <li class="divider"></li>
                  <li><a href="#">退出</a></li>
                </ul>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </nav>

        <div id="content" class="container col-md-10 col-md-offset-1">
          <div class="row">
            <div class="container col-sm-7 rule">
              <div class="">
                <h1 id="systemtime"></h1>
              </div>
              <div class="introduction">
                <h2>系统简介</h2><br/>
                <p>一、组员：<br/>
                   1.组员提供提交周报和考勤的功能。<br/>
                   2.周报提交时间为周五。<br/>
                   3.不在系统时间内只能对已提交周报进行编辑。<br/>
                   4.审核未通过的周报必须重新提交，重新由组长审核。<br/>
                   <br/><br/>
                   二、组长：<br/>
                   1.组长除提交周报和考勤的功能。<br/>
                   2.组长提供周报审核功能，对于审核未通过的周报，组员重新提交后，组长需要重新审核。<br/><br/>
                   三、科研秘书：<br/>
                   1.科研秘书提供考勤审核功能，审核全体成员每周考勤。<br/>
                   2.科研秘书提供会议记录功能。
                 </p>
              </div>
            </div>

            <div class="container col-sm-4 col-sm-offset-1 panels">

              <div class="panel panel-default" class="notify-module">
                <div class="panel-heading">
                  <h3 class="panel-title">公告</h3>
                </div>
                <div class="panel-body">
                    <div class="notify" >
                      <ul id="notify">

                      </ul>

                    </div>
                    <div class="" id="pageDivN">
                      <ul class="pagination pagination-sm" id="NP">
                        <li><a href="#">1</a></li>
                      </ul>
                    </div>
                </div>
                <div class="panel-footer">
                </div>
              </div>


              <div class="panel panel-default" class="record-module">
                <div class="panel-heading">
                  <h3 class="panel-title">会议记录</h3>
                </div>
                <div class="panel-body">
                  <div class="record" >
                    <ul id="record">
                      <li>
                        <a href="#" dataid = "" >ssssssssss</a>
                      </li>
                    </ul>
                  </div>
                  <div class="">
                    <ul class="pagination pagination-sm" id="MP">
                      <li><a href="#">1</a></li>
                    </ul>
                  </div>
                </div>
                <div class="panel-footer">
                </div>
              </div>

            </div>
          </div>

        </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../Static/js/jquery-3.3.1.min.js"></script>
    <script src="../Static/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">

    var meetingRecordPage;
    var notificationPage;

    $(function(){
      queryN(1);
      queryM(1);
      queryMeetingRecordPage();
      queryNotificationPage();
    });

    function queryMeetingRecordPage(){
      $.ajax(){
        url:"wr/function/getmeetingrecordsumpage",
        type:"get",
        async: false,
        success:function(data){
          meetingRecordPage = data.sumPage;
          for (var i = 0; i < meetingRecordPage; i++) {
            n = i+1;
            $('#MP').append('<li><a href="javascript:void(0) onclick="queryM(n)">'+ n +'</a></li>');
          }
        }
      }
    }

    function queryNotificationPage(){
      $.ajax(){
        url:"wr/function/getnotificationsumpage",
        type:"get",
        async: false,
        success:function(data){
          notificationPage = data.sumPage;
          for (var i = 0; i < notificationPage; i++) {
            n = i+1;
            $('#NP').append('<li><a href="javascript:void(0) onclick="queryN(n)">'+ n +'</a></li>');
          }
        }
      }
    }

    function queryN(page){
      $.ajax(){
        url:"wr/function/getnotificationpagecutlist",
        type:"post",
        contentType:"application/x-www-form-urlencoded",
        data:{
          pagenum:page,
          pagecute:5
        }
        success:function(data){
          for (var i = 0; i < data.length; i++) {
             var title = data(i).title;
             var nid = data(i).nid;
             $.('#notify').append('<a href="#" dataid = "'+ nid +'" onclick = "njump(mrid)">'+ title +'</a>');
          }
        }
      }
    }

    function queryM(page){
      $.ajax(){
        url:"wr/function/getmeetingreportpagecutlist",
        type:"post",
        contentType:"application/x-www-form-urlencoded",
        data:{
          pagenum:page,
          pagecute:5
        }
        success:function(data){
          for (var i = 0; i < data.length; i++) {
             var mrid = data(i).mrid ;
             var year = data(i).year;
             var month = data(i).month;
             var day = data(i).day;
             var title = year + "年" + month + "月" + day + "会议记录";
             $.('#record').append('<a href="#" dataid = "'+ mrid +'" onclick = "mjump(mrid)">'+ title +'</a>');
          }
        }
      }
    }

    </script>
  </body>
</html>
